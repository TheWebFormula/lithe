<!doctype html>
<html lang="en">

<head>
  <link rel="modulepreload" href="/app-RNNTBIQD.js">
  <link rel="preload" href="/app-76TNKOZY.css" as="style">

  <meta charset="UTF-8">
  <meta http-equiv="Cache-Control" content="no-store">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="@thewebformula/lithe. A lithe framework for the web">
  <meta name="wfc-theme-color-scheme-preference-disable">
  <title>Build / serve</title>

  <style>
    html:not(.wfc-initiated) {
      display: none;
    }
  </style>

  <script defer type="module" src="/app-RNNTBIQD.js"></script>
  <link href="/app-76TNKOZY.css" rel="stylesheet">
  <script id="hljsscript" src="/highlight-11.8.0.js" async></script>

  <script>
    let isReconnecting = false;
    const es = new EventSource('/livereload');
    es.addEventListener('error', () => { isReconnecting = true; });
    es.addEventListener('open', () => {
      if (isReconnecting) {
        isReconnecting = false;
        location.reload();
      }
    })
  </script>

<script>
  window.litheDev = false;
  console.warn('Lithe: Debug mode');

  window.getPageTemplate = () => {
    console.log(window.page.getTemplate());
  }

  window.getRoutes = () => {
    console.log(window.litheRoutes);
  }
</script></head>

<body>
  <wfc-navigation-drawer>
    <div slot="header" class="headline">Webformula core</div>

    <wfc-anchor href="/">Welcome</wfc-anchor>
    <wfc-anchor href="/getting-started">Getting started</wfc-anchor>
    <wfc-anchor href="/routing">Routing</wfc-anchor>
    <wfc-anchor href="/build">Serve / Build</wfc-anchor>
    <wfc-anchor href="/binding">Signals and binding</wfc-anchor>
    <wfc-anchor href="/web-component">Web component</wfc-anchor>
    <wfc-anchor href="/templates">Templates</wfc-anchor>
    <wfc-anchor href="/fetcher">Fetcher</wfc-anchor>
    <wfc-anchor href="/multi-language">Multiple languages</wfc-anchor>
    <wfc-anchor href="https://github.com/TheWebFormula/lithe" target="_blank">
      <wfc-icon slot="leading-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
          <title>github-circle-black-transparent</title>
          <path d="M10 0C4.477 0 0 4.477 0 10c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V19c0 .27.16.59.67.5C17.14 18.16 20 14.42 20 10A10 10 0 0 0 10 0z" fill="#444444" fill-rule="evenodd" />
        </svg>
      </wfc-icon>
      GitHub
    </wfc-anchor>

    <wfc-anchor href="https://github.com/TheWebFormula/lithe/tree/main/docs" target="_blank">
      <wfc-icon slot="leading-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
          <title>github-circle-black-transparent</title>
          <path d="M10 0C4.477 0 0 4.477 0 10c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V19c0 .27.16.59.67.5C17.14 18.16 20 14.42 20 10A10 10 0 0 0 10 0z" fill="#444444" fill-rule="evenodd" />
        </svg>
      </wfc-icon>
      Example app
    </wfc-anchor>
  </wfc-navigation-drawer>

  <div id="page-content"><page-1439665055><h3 class="page-title">Build / Serve</h3>
<div class="page-subheader wfc-font-title-medium">Serve or build app with bundles optimized based on routes</div>

<section class="page-content-section">
  <div class="page-content-container">
    <wfc-card id="build">
      <div slot="headline">Build app</div>
      <div slot="supporting-text">No need for webpack or other bundlers. ESbuild is packed in and pre configured. Builds are
        also optimized based on route entry points.</div>
      <ul slot="supporting-text">
        <li>Minification</li>
        <li>Sourcemaps</li>
        <li>Dev server</li>
        <li>live relaoding</li>
        <li>Gzip content</li>
        <li>File copying</li>
      </ul>
      
      <pre>
        <code class="language-javascript">
  import build from '@thewebformula/lithe/build';

  /**
  * Basic
  * If using 'app/' as root folder then no config needed
  */
  build();
  

  /**
  * Full config options
  */
  build({
    // Enable spa routing : Default true
    spa: true,

    // folder that contains 'app.js' : Default 'app.js'
    basedir: 'app/',

    // folder that contains 'app.js' : Default 'dist/'
    outdir: 'dist/',

    /**
    * Default true
    * Split code using routes for optimal loading
    */
    chunks: true,

    /**
    * Minify code
    * Set to 'true' when 'NODE_ENV=production'
    *   otherwise it defaults to 'false'
    */
    minify: true,

    /**
    * Create source maps
    * Set to 'false' when 'NODE_ENV=production'
    *   otherwise it defaults to 'true'
    */
    sourcemaps: false,

    /**
    * Compress code
    * Set to 'true' when 'NODE_ENV=production'
    *   otherwise it defaults to 'false'
    */
    gzip: true,

    /**
    * Run dev server
    * Set to 'false' when 'NODE_ENV=production'
    * otherwise it defaults to 'true'
    */
    devServer: true,

    /**
    * Livereload
    * Simply use watch to enable 'node --watch build.js'
    * Set to 'false' when 'NODE_ENV=production'
    * otherwise it defaults to 'true'
    */
    devServerLiveReload: true,
    
    devServerPort: 3000,

    /**
    * devWarnings
    * Enable console warning
    * only html sanitization currently
    * otherwise it defaults to 'false'
    */
    devWarnings: false,

    // supports regex's with wildcards (*, **)
    copyFiles: [
      {
        from: 'app/image.jpg',
        to: 'dist/'
      },
      {
        from: 'app/routes/**/(?!page)*.html',
        to: 'dist/routes'
      },
      {
        from: 'app/code.js',
        to: 'dist/code.js',
        transform({ content, outputFileNames }) {
          // doo work
          return content;
        }
      }
    ],

    // callback before bundle
    onStart: () =&gt; {},

    // callback after bundle
    onEnd: () =&gt; {}
  });
        </code>
      </pre>

      <div class="card-content" style="margin-top: 42px; margin-bottom: 12px;">
        <div style="font-size: 24px;">Native server</div>
      </div>
      <pre>
        <code class="language-javascript">
  import { createServer } from 'node:http';
  import { middlewareNode } from '@thewebformula/lithe/middleware';
  
  // same options as above
  const middleware = middlewareNode({
    basedir: 'docs/',
    outdir: 'dist/',
    copyFiles: [
      { from: 'docs/favicon.ico', to: 'dist/' }
    ]
  });
  
  createServer(async (req, res) =&gt; {
    const handled = await middleware(req, res);
    if (handled === true) return;
    
    // Do other stuff
  }).listen(3000);
        </code>
      </pre>
      
      <div class="card-content" style="margin-top: 42px; margin-bottom: 12px;">
        <div style="font-size: 24px;">Express server</div>
      </div>
      <pre>
        <code class="language-javascript">
  import express from 'express';
  import { middlewareExpress } from '@thewebformula/lithe/middleware';
  
  const app = express();
  // same options as above
  app.use(middlewareExpress({
    basedir: 'docs/',
    outdir: 'dist/',
    copyFiles: [
      { from: 'docs/favicon.ico', to: 'dist/' }
    ]
  }));
  app.use(express.static('./docs'));
  app.listen(3000);
        </code>
      </pre>


      <div class="card-content" style="margin-top: 42px; margin-bottom: 12px;">
        <div style="font-size: 24px;">Run commands</div>
      </div>
      <pre>
        <code class="language-bash">
  # Development run
  node build.js
  
  # Development run with watch to enable livereload
  node --watch-path=./app build.js
  
  # Production run. minifies, gzips, and writes files
  NODE_ENV=production node build.js
        </code>
      </pre>
    </wfc-card>
  </div>
</section>
</page-1439665055></div>

  <wfc-navigation-bar class="auto-hide">
    <wfc-navigation-button></wfc-navigation-button>
  </wfc-navigation-bar>
</body>

</html>