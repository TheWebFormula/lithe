<article>
  <header>
    <h1>Build</h1>
    <div class="page-subheader mc-font-title-medium">Build app with bundles optimized based on routes</div>
  </header>

  <div class="article-main">

    <div class="article-content" style="margin-right: 16px;">

      <section id="build" aria-label="Build">
        <mc-card>
          <h2 slot="headline">Build app</h2>
          <div slot="supporting-text">No need for webpack or other bundlers. ESbuild is packed in and pre configured. Builds are
            also optimized based on route entry points.</div>
          <ul slot="supporting-text">
            <li>Minification</li>
            <li>Sourcemaps</li>
            <li>Dev server</li>
            <li>live relaoding</li>
            <li>File copying</li>
            <li>ENV vars</li>
          </ul>
          <ul slot="supporting-text">
            <li><strong>NODE_ENV=production</strong> will minify the code and NOT run the dev server</li>
            <li><strong>NODE_ENV=other value</strong> will run the dev server</li>
            <li>You can override the default behavior</li>
          </ul>
        
          <code-block language="javascript"><pre>
${`import build from '@thewebformula/lithe/build';

/**
* Basic
* If using 'app/' as root folder then no config needed
*/
build();


/**
* Full config options
*/
build({
  // App javascript file : Default 'app/app.js'
  entryPoint: 'app/app.js',

  /**
   * App styles file
   * If you add a path, the file will be bundled and output as a single .css file
   * Default: undefined
   */
  entryPointCSS: 'app/app.css',

  // index.html file : Default 'index.html'
  indexHTML: 'app/index.html',

  // folder that contains 'app.js' : Default 'dist/'
  outdir: 'dist/',

  /**
  * Minify code
  * Set to 'true' when 'NODE_ENV=production'
  *   otherwise it defaults to 'false'
  */
  minify: true,

  /**
  * Create source maps
  * Set to 'false' when 'NODE_ENV=production'
  *   otherwise it defaults to 'true'
  */
  sourcemap: false,

  /**
  * Run dev server
  * Set to 'false' when 'NODE_ENV=production'
  * otherwise it defaults to 'true'
  */
  devServer: true,

  /**
  * Livereload
  * Simply use watch to enable 'node --watch build.js'
  * Set to 'false' when 'NODE_ENV=production'
  * otherwise it defaults to 'true'
  */
  devServerLiveReload: true,
  
  devServerPort: 3000,
  

  /**
  * devWarnings
  * Enable console warning
  * only html sanitization currently
  * defaults to 'false'
  */
  devWarnings: false,

  /**
  * securityLevel
  * Set security level warnings for html
  * Default: 1
  */
  securityLevel: 1,

  // supports regex's with wildcards (*, **)
  copy: [
    {
      from: 'app/image.jpg',
      to: 'dist/'
    },
    {
      from: 'app/routes/**/(?!page)*.html',
      to: 'dist/routes'
    }
  ],

  // inject env vars to build
  define: {
    'process.env.SOME_VAR': process.env.SOME_VAR
  },

  // callback before bundle
  onStart: () => {},

  // callback after bundle
  onEnd: () => {}
});`}
          </pre></code-block>
        </mc-card>
      </section>
    </div>
  </div>
</article>
